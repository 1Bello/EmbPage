<h3 id="json-data">
    <%= @message_content %>
</h3>

<!-- Remove the static time-display element -->
<!-- <p id="time-display"></p> -->

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script>
  function fetchData() {
    fetchTime = new Date().toLocaleTimeString(); // Update fetch time on function call
    $.ajax({
      url: '/fetch_data',
      method: 'GET',
      dataType: 'json',
      success: function(data) {
         if (data.message) { // Check if data.message is not empty
          $('#json-data').text(data.message);

          // Remove any existing time display element
          $('#time-display').remove();

          // Create a new time display element using fetchTime
          var timeDisplay = $('<p id="time-display">Last fetched at: ' + fetchTime + '</p>');

          // Append the new time display element to the body (or any specific parent element)
          $('body').append(timeDisplay);
        }
      }
    });
  }

  // Fetch data every 5 seconds
  setInterval(fetchData, 5000);

  // Fetch data initially when the page loads
  fetchData();
</script>
